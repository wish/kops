load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")

go_library(
    name = "go_default_library",
    srcs = [
        "cgo_generic.c",
        "cgo_generic.go",
        "cgo_linux.c",
        "cgo_linux.go",
        "generic.go",
        "no_cgo.go",
        "release.go",
        "suffix_amd64.go",
        "suffix_arm.go",
        "suffix_darwin.go",
        "suffix_linux.go",
        "tag_a.go",
        "tag_d.go",
        "tag_l.go",
    ],
    cgo = True,
    copts = [
        "-DGENERIC",
    ] + select({
        "@io_bazel_rules_go//go/platform:linux": [
            "-DLINUX",
        ],
        "//conditions:default": [],
    }),
    importmap = "k8s.io/kops/vendor/github.com/bazelbuild/bazel-gazelle/language/go/testdata/platforms",
    importpath = "github.com/bazelbuild/bazel-gazelle/language/go/testdata/platforms",
    visibility = ["//visibility:public"],
    deps = [
        "//vendor/example.com/repo/platforms/generic:go_default_library",
    ] + select({
        "@io_bazel_rules_go//go/platform:darwin": [
            "//vendor/example.com/repo/platforms/darwin:go_default_library",
        ],
        "@io_bazel_rules_go//go/platform:linux": [
            "//vendor/example.com/repo/platforms/linux:go_default_library",
        ],
        "//conditions:default": [],
    }),
)

go_test(
    name = "go_default_test",
    srcs = [
        "generic_test.go",
        "suffix_linux_test.go",
    ],
    embed = [":go_default_library"],
)
